(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"./app/containers/EmailVerification/Container.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),s=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n("./node_modules/@babel/runtime/helpers/extends.js")),o=s(n("./node_modules/@babel/runtime/helpers/jsx.js")),a=s(n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),l=s(n("./node_modules/@babel/runtime/helpers/classCallCheck.js")),u=s(n("./node_modules/@babel/runtime/helpers/createClass.js")),c=s(n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=s(n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=s(n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),f=s(n("./node_modules/@babel/runtime/helpers/inherits.js")),m=s(n("./node_modules/@babel/runtime/helpers/defineProperty.js")),j=s(n("./node_modules/react/index.js")),b=(s(n("./node_modules/prop-types/index.js")),n("./node_modules/react-helmet/lib/Helmet.js")),v=(r(n("./node_modules/bpk-component-image/index.js")),n("./node_modules/bpk-react-utils/index.js")),y=(n("./node_modules/gg-components/LoadingIndicator/index.js"),n("./node_modules/gg-components/Button/index.js"),n("./node_modules/gg-components/Typography/index.js")),g=(n("./node_modules/gg-components/Code/index.js"),n("./app/components/Forms/index.js"),n("./node_modules/gg-components/Auth/index.js")),E=n("./app/components/Sessions/index.js"),h=n("./node_modules/gg-components/Redirect/index.js"),_=(n("./helpers/constants.js"),s(n("./app/containers/pages.scss"))),x=((0,v.cssModules)(_.default),(0,o.default)(b.Helmet,{title:"Email verification"})),k=(0,o.default)("span",{},void 0,"Thanks for verifying your email!"),O=function(e){function t(){var e,n;(0,l.default)(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=(0,c.default)(this,(e=(0,d.default)(t)).call.apply(e,[this].concat(s))),(0,m.default)((0,p.default)(n),"componentDidMount",(function(){var e=setInterval((function(){var t=new URL(window.location).searchParams.get("token");n.props.cookiesAllowed&&(n.props.verifyEmail(t),clearInterval(e))}),200)})),n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.cookiesAllowed,n=e.onCookiesAccepted,r=e.user,s=e.verifyEmail,l=e.verifying,u=e.verifySuccess,c=e.verifyError,d=e.className,p=(0,a.default)(e,["cookiesAllowed","onCookiesAccepted","user","verifyEmail","verifying","verifySuccess","verifyError","className"]),f=[];return d&&f.push(d),u?(0,o.default)(h.GGRedirect,{className:f.join(" "),to:"/account",name:"Thanks for verifying your email"}):j.default.createElement("div",(0,i.default)({className:f.join(" ")},p),x,(0,o.default)(E.CookiesOnly,{cookiesAccepted:t,onAccept:function(){n()}}),(0,o.default)(y.Section,{name:"Email verification"},void 0,u&&k),(0,o.default)(g.DebugObject,{debugTitle:"Email verification",debugObject:{cookiesAllowed:t,onCookiesAccepted:n,verifyEmail:s,user:r,verifying:l,verifySuccess:u,verifyError:c}}))}}]),t}(j.default.Component);t.default=O,e.exports=t.default},"./app/containers/EmailVerification/actionMeta.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={key:"verify_email",actionDefinitions:[{VERIFY_EMAIL:"tbd",attributes:["token"],stateMutations:{token:function(e){return e.token},verifying:!0,verifyError:null}},{VERIFY_EMAIL_REGISTER_SUCCESS:"tbd",attributes:[],stateMutations:{verifying:!1,verifySuccess:!0}},{VERIFY_EMAIL_REGISTER_ERROR:"tbd",attributes:["verifyError"],stateMutations:{verifying:!1,verifySuccess:!1,verifyError:function(e){return e.verifyError}}}]};t.default=r,e.exports=t.default},"./app/containers/EmailVerification/index.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),s=r(n("./node_modules/@babel/runtime/helpers/defineProperty.js")),i=r(n("./app/containers/App/selectors.js")),o=r(n("./app/containers/App/actions.js")),a=n("./helpers/redux/index.js"),l=r(n("./app/containers/EmailVerification/actionMeta.js")),u=n("./app/containers/EmailVerification/redux-definitions.js"),c=r(n("./app/containers/EmailVerification/saga.js")),d=r(n("./app/containers/EmailVerification/Container.js"));function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}e.exports=(0,a.composeContainer)(d.default,l.default.key,f({},u.selectors,{},i.default),f({},u.actions,{appActions:o.default}),u.reducer,c.default)},"./app/containers/EmailVerification/redux-definitions.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),s=r(n("./app/containers/EmailVerification/actionMeta.js")),i=r(n("./helpers/redux/index.js"));e.exports=(0,i.default)(s.default)},"./app/containers/EmailVerification/saga.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.doVerification=b,t.default=v;var s=r(n("./node_modules/@babel/runtime/regenerator/index.js")),i=n("./app/containers/EmailVerification/redux-definitions.js"),o=n("./node_modules/redux-saga/dist/redux-saga-effects-npm-proxy.cjs.js"),a=(n("./app/containers/App/actions.js"),n("./helpers/constants.js")),l=(n("./app/containers/RequestStatusWrapper/actions.js"),n("./helpers/redux/saga.js")),u=(r(n("./app/utils/request.js")),s.default.mark(b)),c=s.default.mark(v),d=i.constants.VERIFY_EMAIL,p=i.actions.verifyEmailRegisterSuccess,f=i.actions.verifyEmailRegisterError,m=i.selectors.makeSelectToken,j={type:"success",message:"Email verified!"};function b(){var e,t,n;return s.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,o.select)(m());case 2:return e=r.sent,t="".concat(a.API_ENDPOINT,"/verifyemail"),n={method:"POST",body:JSON.stringify({verificationKey:e}),headers:{"Content-Type":"application/json"}},r.next=7,(0,l.sagaHelper)(t,n,f,p,j,null);case 7:case"end":return r.stop()}}),u)}function v(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.takeLatest)(d,b);case 2:case"end":return e.stop()}}),c)}}}]);
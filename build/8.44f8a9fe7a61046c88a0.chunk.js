(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"./app/containers/AdminBlogs/Container.js":function(e,t,s){"use strict";var n=s("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(s("./node_modules/@babel/runtime/helpers/extends.js")),a=r(s("./node_modules/@babel/runtime/helpers/jsx.js")),l=r(s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),u=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),g=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),m=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=n(s("./node_modules/react/index.js")),b=(r(s("./node_modules/prop-types/index.js")),s("./node_modules/react-helmet/lib/Helmet.js")),j=r(s("./node_modules/bpk-component-card/index.js")),_=s("./node_modules/bpk-react-utils/index.js"),h=r(s("./app/containers/AdminBlogs/Skeleton.js")),B=s("./app/components/Blogs/index.js"),x=s("./node_modules/gg-components/Button/index.js"),O=s("./node_modules/gg-components/Typography/index.js"),v=(s("./node_modules/gg-components/FormBuilder/index.js"),s("./helpers/constants.js"),s("./node_modules/gg-components/Auth/index.js")),E=r(s("./app/containers/pages.scss")),A=(0,_.cssModules)(E.default),y=(0,a.default)(b.Helmet,{title:"Admin - blogs"}),S=function(e){function t(){var e,s;(0,u.default)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return s=(0,i.default)(this,(e=(0,c.default)(t)).call.apply(e,[this].concat(r))),(0,m.default)((0,p.default)(s),"componentDidMount",(function(){s.props.loadBlogs()})),s}return(0,g.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.setLoginRedirect,s=e.user,n=e.userLoading,r=e.className,u=e.loadBlogs,d=e.blogs,i=e.loading,c=e.success,p=e.error,g=e.deleteBlog,m=e.deleting,b=(0,l.default)(e,["setLoginRedirect","user","userLoading","className","loadBlogs","blogs","loading","success","error","deleteBlog","deleting"]),_=[];r&&_.push(r);var E=f.default.createElement("div",(0,o.default)({className:_.join(" ")},b),(0,a.default)(v.AdminOnly,{user:s,setLoginRedirect:function(){return t("admin/blog")}},void 0,(0,a.default)(O.Section,{name:"Admin - blog"},void 0,(0,a.default)(x.Button,{className:A("pages__component"),large:!0,href:"/admin/blog/create"},void 0,"Create blog"),d&&d.map&&d.map((function(e){return(0,a.default)(j.default,{className:A("pages__component","pages__bpk-card")},void 0,(0,a.default)(v.APIEntity,{name:"more",entityType:"Blog",entity:e}),(0,a.default)(B.BlogCard,{linkPrefix:"/admin/blog/edit",blog:e}),(0,a.default)(x.Button,{large:!0,destructive:!0,disabled:m,onClick:function(){return g(e)}},void 0,"Delete"))})))));return(0,a.default)(f.Fragment,{},void 0,y,(0,a.default)(v.LoadingCover,{loadingSkeleton:h.default,loading:n||!d&&i},void 0,E),(0,a.default)(v.DebugObject,{debugTitle:"Admin blogs",debugObject:{setLoginRedirect:t,user:s,userLoading:n,className:r,loadBlogs:u,blogs:d,loading:i,success:c,error:p}}))}}]),t}(f.default.Component);t.default=S,S.defaultProps={blogs:null,error:null,success:!1,loading:!1,className:null,creatingBlog:!1,deleting:!1,loggingIn:!1,user:null,userLoading:!1},e.exports=t.default},"./app/containers/AdminBlogs/actionDefinitions.js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=[{LOAD_BLOGS:"tbd",attributes:[]},{LOAD_BLOGS_SUCCESS:"tbd",attributes:["blogs"]},{LOAD_BLOGS_ERROR:"tbd",attributes:["error"]},{DELETE_BLOG:"tbd",attributes:["blog"]},{DELETE_BLOG_SUCCESS:"tbd",attributes:[]},{DELETE_BLOG_ERROR:"tbd",attributes:["error"]}];t.default=n,e.exports=t.default},"./app/containers/AdminBlogs/actions.js":function(e,t,s){"use strict";var n=s("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=r(s("./app/containers/AdminBlogs/constants.js")),a=r(s("./app/containers/AdminBlogs/actionDefinitions.js")),l=n(s("./helpers/redux/actions.js"));e.exports=(0,l.default)((0,l.populateConstants)(a.default,o.default))},"./app/containers/AdminBlogs/constants.js":function(e,t,s){"use strict";var n=s("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=r(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),a=r(s("./app/containers/AdminBlogs/actionDefinitions.js")),l=n(s("./helpers/redux/constants.js"));e.exports=l.default.apply(void 0,(0,o.default)((0,l.inferConstantsFromActionDefinitions)(a.default)))},"./app/containers/AdminBlogs/index.js":function(e,t,s){"use strict";var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.mapDispatchToProps=t.default=void 0;var r=n(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),o=s("./node_modules/react-redux/lib/index.js"),a=s("./node_modules/redux/es/index.js"),l=s("./node_modules/reselect/es/index.js"),u=n(s("./app/containers/AdminBlogs/selectors.js")),d=n(s("./app/containers/AdminBlogs/actions.js")),i=n(s("./app/containers/AdminBlogs/reducer.js")),c=n(s("./app/containers/AdminBlogs/saga.js")),p=n(s("./app/containers/AdminBlogs/Container.js")),g=n(s("./app/utils/injectReducer.js")),m=n(s("./app/utils/injectSaga.js")),f=n(s("./app/containers/App/selectors.js")),b=n(s("./app/containers/App/actions.js")),j=s("./helpers/redux/selectors.js"),_=s("./helpers/redux/actions.js");function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function B(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach((function(t){(0,r.default)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var x=function(e){return(0,_.mapActions)(e,B({},b.default,{},d.default))};t.mapDispatchToProps=x;var O=(0,l.createStructuredSelector)((0,j.mapSelectors)(B({},f.default,{},u.default))),v=(0,o.connect)(O,x),E=(0,g.default)({key:"adminblogs",reducer:i.default}),A=(0,m.default)({key:"adminblogs",saga:c.default}),y=(0,a.compose)(E,A,v)(p.default);t.default=y},"./app/containers/AdminBlogs/reducer.js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s("./node_modules/immutable/dist/immutable.js"),r=s("./app/containers/AdminBlogs/constants.js"),o=(0,n.fromJS)({blogs:null,loading:!1,success:!1,error:null,blogToDelete:null,deleting:!1,deleteSuccess:!1,deleteError:null});var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.LOAD_BLOGS:return e.set("loading",!0).set("error",!1);case r.LOAD_BLOGS_SUCCESS:return e.set("loading",!1).set("success",!0).set("blogs",t.blogs);case r.LOAD_BLOGS_ERROR:return e.set("loading",!1).set("error",t.error);case r.DELETE_BLOG:return e.set("blogToDelete",t.blog).set("deleting",!0).set("deleteError",!1);case r.DELETE_BLOG_SUCCESS:return e.set("deleting",!1).set("deleteSuccess",!0);case r.DELETE_BLOG_ERROR:return e.set("deleting",!1).set("deleteError",t.error);default:return e}};t.default=a,e.exports=t.default},"./app/containers/AdminBlogs/saga.js":function(e,t,s){"use strict";var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.doLoadBlogs=h,t.doDeleteBlog=B,t.default=x;var r=n(s("./node_modules/@babel/runtime/regenerator/index.js")),o=s("./app/containers/AdminBlogs/constants.js"),a=s("./app/containers/AdminBlogs/actions.js"),l=s("./app/containers/AdminBlogs/selectors.js"),u=s("./node_modules/redux-saga/dist/redux-saga-effects-npm-proxy.cjs.js"),d=s("./app/containers/RequestStatusWrapper/actions.js"),i=s("./helpers/constants.js"),c=n(s("./app/utils/request.js")),p=r.default.mark(h),g=r.default.mark(B),m=r.default.mark(x),f={type:"success",message:"Blogs loaded!"},b={type:"error",message:"Could not load blogs."},j={type:"success",message:"Blog deleted!"},_={type:"error",message:"Could not delete blog."};function h(){var e,t;return r.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return e="".concat(i.API_ENDPOINT,"/blogs/load"),s.prev=1,s.next=4,(0,u.call)(c.default,e,{method:"GET"});case 4:if(!(t=s.sent).error){s.next=12;break}return s.next=8,(0,u.put)((0,a.loadBlogsError)(t));case 8:return s.next=10,(0,u.put)((0,d.pushMessage)(b));case 10:s.next=16;break;case 12:return s.next=14,(0,u.put)((0,a.loadBlogsSuccess)(t));case 14:return s.next=16,(0,u.put)((0,d.pushMessage)(f));case 16:s.next=24;break;case 18:return s.prev=18,s.t0=s.catch(1),s.next=22,(0,u.put)((0,a.loadBlogsError)(s.t0));case 22:return s.next=24,(0,u.put)((0,d.pushMessage)(i.COMMUNICATION_ERROR_MESSAGE));case 24:case"end":return s.stop()}}),p,null,[[1,18]])}function B(){var e,t,s;return r.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,u.select)((0,l.makeSelectBlogToDelete)());case 2:return e=n.sent,t="".concat(i.API_ENDPOINT,"/blogs/remove"),n.prev=4,n.next=7,(0,u.call)(c.default,t,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});case 7:if(!(s=n.sent).error){n.next=15;break}return n.next=11,(0,u.put)((0,a.deleteBlogError)(s));case 11:return n.next=13,(0,u.put)((0,d.pushMessage)(_));case 13:n.next=21;break;case 15:return n.next=17,(0,u.put)((0,a.deleteBlogSuccess)(s));case 17:return n.next=19,(0,u.put)((0,d.pushMessage)(j));case 19:return n.next=21,(0,u.put)((0,a.loadBlogs)());case 21:n.next=29;break;case 23:return n.prev=23,n.t0=n.catch(4),n.next=27,(0,u.put)((0,a.deleteBlogError)(n.t0));case 27:return n.next=29,(0,u.put)((0,d.pushMessage)(i.COMMUNICATION_ERROR_MESSAGE));case 29:case"end":return n.stop()}}),g,null,[[4,23]])}function x(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.takeLatest)(o.LOAD_BLOGS,h);case 2:return e.next=4,(0,u.takeLatest)(o.DELETE_BLOG,B);case 4:case"end":return e.stop()}}),m)}},"./app/containers/AdminBlogs/selectors.js":function(e,t,s){"use strict";var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=n(s("./app/containers/AdminBlogs/reducer.js")),o=n(s("./helpers/redux/selectors.js")),a=s("./helpers/redux/reducers.js");e.exports=(0,o.default)("adminblogs",(0,a.inferPropertiesFromInitialState)((0,a.getInitialState)(r.default)))}}]);
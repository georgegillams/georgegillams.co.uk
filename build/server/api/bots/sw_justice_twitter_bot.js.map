{"version":3,"sources":["../../../../server/api/bots/sw_justice_twitter_bot.js"],"names":["TwitterBot","require","moment","Bot","process","env","BOT_CONSUMER_KEY","consumer_key","consumer_secret","BOT_CONSUMER_SECRET","access_token","BOT_ACCESS_TOKEN","access_token_secret","BOT_ACCESS_TOKEN_SECRET","timeOfRejection","tweet","currentTime","diffDays","diff","diffHours","phrase","console","log","setInterval"],"mappings":";;AAAA,IAAMA,UAAU,GAAGC,OAAO,CAAC,iBAAD,CAAP,CAA2BD,UAA9C;;AACA,IAAME,MAAM,GAAGD,OAAO,CAAC,QAAD,CAAtB;;AAEA,IAAME,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,gBAAZ,GACR,IAAIN,UAAJ,CAAe;AACbO,EAAAA,YAAY,EAAEH,OAAO,CAACC,GAAR,CAAYC,gBADb;AAEbE,EAAAA,eAAe,EAAEJ,OAAO,CAACC,GAAR,CAAYI,mBAFhB;AAGbC,EAAAA,YAAY,EAAEN,OAAO,CAACC,GAAR,CAAYM,gBAHb;AAIbC,EAAAA,mBAAmB,EAAER,OAAO,CAACC,GAAR,CAAYQ;AAJpB,CAAf,CADQ,GAOR,IAPJ;AASA,IAAMC,eAAe,GAAGZ,MAAM,CAAC,kBAAD,EAAqB,gBAArB,CAA9B;;AAEA,SAASa,KAAT,GAAiB;AACf,MAAMC,WAAW,GAAGd,MAAM,EAA1B;AACA,MAAMe,QAAQ,GAAGD,WAAW,CAACE,IAAZ,CAAiBJ,eAAjB,EAAkC,MAAlC,CAAjB;AACA,MAAIK,SAAS,GAAGH,WAAW,CAACE,IAAZ,CAAiBJ,eAAjB,EAAkC,OAAlC,CAAhB;AACAK,EAAAA,SAAS,IAAIF,QAAQ,GAAG,EAAxB;AAEA,MAAMG,MAAM,+MAAwMH,QAAxM,oBAA0NE,SAA1N,YAAZ;AAEAE,EAAAA,OAAO,CAACC,GAAR,cAAyBF,MAAzB;;AACA,MAAIjB,GAAJ,EAAS;AACPA,IAAAA,GAAG,CAACY,KAAJ,CAAUK,MAAV;AACD;AACF;;AAEDG,WAAW,CAACR,KAAD,EAAQ,IAAI,EAAJ,GAAS,EAAT,GAAc,IAAtB,CAAX","sourcesContent":["const TwitterBot = require('node-twitterbot').TwitterBot;\nconst moment = require('moment');\n\nconst Bot = process.env.BOT_CONSUMER_KEY\n  ? new TwitterBot({\n      consumer_key: process.env.BOT_CONSUMER_KEY,\n      consumer_secret: process.env.BOT_CONSUMER_SECRET,\n      access_token: process.env.BOT_ACCESS_TOKEN,\n      access_token_secret: process.env.BOT_ACCESS_TOKEN_SECRET,\n    })\n  : null;\n\nconst timeOfRejection = moment('20/09/2018 16:37', 'D/M/YYYY HH:mm');\n\nfunction tweet() {\n  const currentTime = moment();\n  const diffDays = currentTime.diff(timeOfRejection, 'days');\n  let diffHours = currentTime.diff(timeOfRejection, 'hours');\n  diffHours -= diffDays * 24;\n\n  const phrase = `@SW_Railway on 18 September the 1748 service from London Waterloo to Southampton Central, due to arrive at 1918, was delayed by > 20 minutes. Yet you've been rejecting my claim DR-4101-4521 for ${diffDays} days, ${diffHours} hours.`;\n\n  console.log(`tweeting:`, phrase);\n  if (Bot) {\n    Bot.tweet(phrase);\n  }\n}\n\nsetInterval(tweet, 3 * 60 * 60 * 1000);\n"],"file":"sw_justice_twitter_bot.js"}
{"version":3,"sources":["../../../../server/api/helpers/validation.js"],"names":["isEmpty","value","undefined","join","rules","data","map","rule","filter","error","email","test","required","minLength","min","length","maxLength","max","integer","Number","isInteger","oneOf","enumeration","indexOf","match","field","createValidator","errors","Object","keys","forEach","key","concat"],"mappings":"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","sourcesContent":["const isEmpty = value => value === undefined || value === null || value === '';\nconst join = rules => (value, data) =>\n  rules.map(rule => rule(value, data)).filter(error => !!error)[0];\n\nexport function email(value) {\n  // Let's not start a debate on email regex. This is just for an example app!\n  if (\n    !isEmpty(value) &&\n    !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(value)\n  ) {\n    return 'Invalid email address';\n  }\n}\n\nexport function required(value) {\n  if (isEmpty(value)) {\n    return 'Required';\n  }\n}\n\nexport function minLength(min) {\n  return value => {\n    if (!isEmpty(value) && value.length < min) {\n      return `Must be at least ${min} characters`;\n    }\n  };\n}\n\nexport function maxLength(max) {\n  return value => {\n    if (!isEmpty(value) && value.length > max) {\n      return `Must be no more than ${max} characters`;\n    }\n  };\n}\n\nexport function integer(value) {\n  if (!Number.isInteger(Number(value))) {\n    return 'Must be an integer';\n  }\n}\n\nexport function oneOf(enumeration) {\n  return value => {\n    if (!~enumeration.indexOf(value)) {\n      return `Must be one of: ${enumeration.join(', ')}`;\n    }\n  };\n}\n\nexport function match(field) {\n  return (value, data) => {\n    if (data) {\n      if (value !== data[field]) {\n        return 'Do not match';\n      }\n    }\n  };\n}\n\nexport function createValidator(rules) {\n  return (data = {}) => {\n    const errors = {};\n    Object.keys(rules).forEach(key => {\n      const rule = join([].concat(rules[key])); // concat enables both functions and arrays of functions\n      const error = rule(data[key], data);\n      if (error) {\n        errors[key] = error;\n      }\n    });\n    return errors;\n  };\n}\n"],"file":"validation.js"}
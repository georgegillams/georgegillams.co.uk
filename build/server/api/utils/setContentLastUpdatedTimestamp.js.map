{"version":3,"sources":["../../../../server/api/utils/setContentLastUpdatedTimestamp.js"],"names":["setContentLastUpdatedTimestamp","newContentUpdateData","redisKey","then","contentUpdateData","length","lastUpdatedTimestamp","Date","now","toString","body"],"mappings":";;;;;;;AAAA;;AAEe,SAASA,8BAAT,GAA0C;AACvD,MAAIC,oBAAoB,GAAG,EAA3B;AACA,wBAAU;AAAEC,IAAAA,QAAQ,EAAE;AAAZ,GAAV,EAA0CC,IAA1C,CAA+C,UAAAC,iBAAiB,EAAI;AAClE,QAAIA,iBAAiB,IAAIA,iBAAiB,CAACC,MAAlB,GAA2B,CAApD,EAAuD;AACrDJ,MAAAA,oBAAoB,GAAGG,iBAAiB,CAAC,CAAD,CAAxC;AACAH,MAAAA,oBAAoB,CAACK,oBAArB,GAA4CC,IAAI,CAACC,GAAL,GAAWC,QAAX,EAA5C;AACA,8BACE;AAAEP,QAAAA,QAAQ,EAAE;AAAZ,OADF,EAEE;AAAEQ,QAAAA,IAAI,EAAET;AAAR,OAFF;AAID,KAPD,MAOO;AACL,8BACE;AAAEC,QAAAA,QAAQ,EAAE;AAAZ,OADF,EAEE;AAAEQ,QAAAA,IAAI,EAAE;AAAEJ,UAAAA,oBAAoB,EAAEC,IAAI,CAACC,GAAL;AAAxB;AAAR,OAFF;AAID;AACF,GAdD;AAeD","sourcesContent":["import { datumLoad, datumCreate, datumUpdate } from '../actions/datum';\n\nexport default function setContentLastUpdatedTimestamp() {\n  let newContentUpdateData = {};\n  datumLoad({ redisKey: 'contentUpdates' }).then(contentUpdateData => {\n    if (contentUpdateData && contentUpdateData.length > 0) {\n      newContentUpdateData = contentUpdateData[0];\n      newContentUpdateData.lastUpdatedTimestamp = Date.now().toString();\n      datumUpdate(\n        { redisKey: 'contentUpdates' },\n        { body: newContentUpdateData },\n      );\n    } else {\n      datumCreate(\n        { redisKey: 'contentUpdates' },\n        { body: { lastUpdatedTimestamp: Date.now() } },\n      );\n    }\n  });\n}\n"],"file":"setContentLastUpdatedTimestamp.js"}
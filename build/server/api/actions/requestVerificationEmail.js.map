{"version":3,"sources":["../../../../server/api/actions/requestVerificationEmail.js"],"names":["requestVerificationEmail","req","reqSecured","usersAllowedAttributes","Promise","resolve","reject","then","user","UNAUTHORISED_WRITE"],"mappings":";;;;;;;;;AAAA;;AAEA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEe,SAASA,wBAAT,CAAkCC,GAAlC,EAAuC;AACpD,MAAMC,UAAU,GAAG,2BAAUD,GAAV,EAAeE,kCAAf,CAAnB;AACA,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,oCAAeJ,UAAf,EAA2BK,IAA3B,CAAgC,UAAAC,IAAI,EAAI;AACtC,UAAIA,IAAJ,EAAU;AACR,sDAA2BA,IAA3B;AACAH,QAAAA,OAAO,CAAC,2BAAD,CAAP;AACD,OAHD,MAGO;AACLC,QAAAA,MAAM,CAACG,6BAAD,CAAN;AACD;AACF,KAPD;AAQD,GATM,CAAP;AAUD","sourcesContent":["import { datumLoad, datumUpdate } from '../actions/datum';\n\nimport usersAllowedAttributes from './users/usersAllowedAttributes';\n\nimport { find } from 'utils/find';\nimport authentication from 'utils/authentication';\nimport setContentLastUpdatedTimestamp from 'utils/setContentLastUpdatedTimestamp';\nimport reqSecure from 'utils/reqSecure';\nimport { sendEmailVerificationEmail } from 'utils/emailHelpers';\nimport { UNAUTHORISED_WRITE } from 'helpers/constants';\n\nexport default function requestVerificationEmail(req) {\n  const reqSecured = reqSecure(req, usersAllowedAttributes);\n  return new Promise((resolve, reject) => {\n    authentication(reqSecured).then(user => {\n      if (user) {\n        sendEmailVerificationEmail(user);\n        resolve('Verification email resent');\n      } else {\n        reject(UNAUTHORISED_WRITE);\n      }\n    });\n  });\n}\n"],"file":"requestVerificationEmail.js"}
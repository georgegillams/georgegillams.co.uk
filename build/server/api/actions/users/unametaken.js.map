{"version":3,"sources":["../../../../../server/api/actions/users/unametaken.js"],"names":["unametaken","req","reqSecured","usersAllowedAttributes","Promise","resolve","setTimeout","redisKey","then","userData","body","uname","userWithUname","existingValue"],"mappings":";;;;;;;;;AAAA;;AAEA;;AAEA;;AACA;;AAEe,SAASA,UAAT,CAAoBC,GAApB,EAAyB;AACtC,MAAMC,UAAU,GAAG,2BAAUD,GAAV,EAAeE,kCAAf,CAAnB;AACA,SAAO,IAAIC,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5BC,IAAAA,UAAU,CAAC,YAAM;AACf,4BAAU;AAAEC,QAAAA,QAAQ,EAAE;AAAZ,OAAV,EAAiCC,IAAjC,CAAsC,UAAAC,QAAQ,EAAI;AAAA,oBACP,iBACvCA,QADuC,EAEvCP,UAAU,CAACQ,IAAX,CAAgBC,KAFuB,EAGvC,OAHuC,CADO;AAAA,YACzBC,aADyB,SACxCC,aADwC;;AAMhD,YAAID,aAAJ,EAAmB;AACjBP,UAAAA,OAAO,CAAC,IAAD,CAAP;AACD,SAFD,MAEO;AACLA,UAAAA,OAAO,CAAC,KAAD,CAAP;AACD;AACF,OAXD;AAYD,KAbS,EAaP,GAbO,CAAV;AAcD,GAfM,CAAP;AAgBD","sourcesContent":["import { datumLoad } from '../datum';\n\nimport usersAllowedAttributes from './usersAllowedAttributes';\n\nimport { find } from 'utils/find';\nimport reqSecure from 'utils/reqSecure';\n\nexport default function unametaken(req) {\n  const reqSecured = reqSecure(req, usersAllowedAttributes);\n  return new Promise(resolve => {\n    setTimeout(() => {\n      datumLoad({ redisKey: 'users' }).then(userData => {\n        const { existingValue: userWithUname } = find(\n          userData,\n          reqSecured.body.uname,\n          'uname',\n        );\n        if (userWithUname) {\n          resolve(true);\n        } else {\n          resolve(false);\n        }\n      });\n    }, 750);\n  });\n}\n"],"file":"unametaken.js"}
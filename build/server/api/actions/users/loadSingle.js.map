{"version":3,"sources":["../../../../../server/api/actions/users/loadSingle.js"],"names":["loadSingle","req","reqSecured","Promise","resolve","reject","then","user","admin","redisKey","filter","ar","id","query","UNAUTHORISED_READ","err"],"mappings":";;;;;;;;;AAAA;;AAEA;;AACA;;AACA;;AAEe,SAASA,UAAT,CAAoBC,GAApB,EAAyB;AACtC,MAAMC,UAAU,GAAG,2BAAUD,GAAV,EAAe,EAAf,CAAnB;AACA,SAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,oCAAeH,UAAf,EAA2BI,IAA3B,CACE,UAAAC,IAAI,EAAI;AACN,UAAIA,IAAI,IAAIA,IAAI,CAACC,KAAjB,EAAwB;AACtBJ,QAAAA,OAAO,CACL,4BAAgB;AACdK,UAAAA,QAAQ,EAAE,OADI;AAEdC,UAAAA,MAAM,EAAE,gBAAAC,EAAE;AAAA,mBAAIA,EAAE,CAACC,EAAH,KAAUV,UAAU,CAACW,KAAX,CAAiBD,EAA/B;AAAA;AAFI,SAAhB,CADK,CAAP;AAMD,OAPD,MAOO;AACLP,QAAAA,MAAM,CAACS,4BAAD,CAAN;AACD;AACF,KAZH,EAaE,UAAAC,GAAG;AAAA,aAAIV,MAAM,CAACU,GAAD,CAAV;AAAA,KAbL;AAeD,GAhBM,CAAP;AAiBD","sourcesContent":["import { datumLoadSingle } from '../datum';\n\nimport { UNAUTHORISED_READ } from 'helpers/constants';\nimport authentication from 'utils/authentication';\nimport reqSecure from 'utils/reqSecure';\n\nexport default function loadSingle(req) {\n  const reqSecured = reqSecure(req, []);\n  return new Promise((resolve, reject) => {\n    authentication(reqSecured).then(\n      user => {\n        if (user && user.admin) {\n          resolve(\n            datumLoadSingle({\n              redisKey: 'users',\n              filter: ar => ar.id === reqSecured.query.id,\n            }),\n          );\n        } else {\n          reject(UNAUTHORISED_READ);\n        }\n      },\n      err => reject(err),\n    );\n  });\n}\n"],"file":"loadSingle.js"}
{"version":3,"sources":["../../../../../server/api/actions/sessions/create.js"],"names":["create","req","reqSecured","Promise","resolve","reject","then","user","body","sessionKey","lastActive","Date","now","redisKey","err"],"mappings":";;;;;;;;;AAAA;;AAEA;;AAEA;;AACA;;AACA;;AAEe,SAASA,MAAT,CAAgBC,GAAhB,EAAqB;AAClC,MAAMC,UAAU,GAAG,2BAAUD,GAAV,EAAe,EAAf,CAAnB;AACA,SAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,oCAAeH,UAAf,EAA2BI,IAA3B,CACE,UAAAC,IAAI,EAAI;AACNL,MAAAA,UAAU,CAACM,IAAX,CAAgBC,UAAhB,GAA6B,wBAA7B;AACAP,MAAAA,UAAU,CAACM,IAAX,CAAgBE,UAAhB,GAA6BC,IAAI,CAACC,GAAL,EAA7B;AACAR,MAAAA,OAAO,CAAC,wBAAY;AAAES,QAAAA,QAAQ,EAAE,UAAZ;AAAwBN,QAAAA,IAAI,EAAJA;AAAxB,OAAZ,EAA4CL,UAA5C,CAAD,CAAP;AACD,KALH,EAME,UAAAY,GAAG;AAAA,aAAIT,MAAM,CAACS,GAAD,CAAV;AAAA,KANL;AAQD,GATM,CAAP;AAUD","sourcesContent":["import crypto from 'crypto';\n\nimport { datumCreate } from '../datum';\n\nimport authentication from 'utils/authentication';\nimport reqSecure from 'utils/reqSecure';\nimport { generateKey } from 'utils/hash';\n\nexport default function create(req) {\n  const reqSecured = reqSecure(req, []);\n  return new Promise((resolve, reject) => {\n    authentication(reqSecured).then(\n      user => {\n        reqSecured.body.sessionKey = generateKey();\n        reqSecured.body.lastActive = Date.now();\n        resolve(datumCreate({ redisKey: 'sessions', user }, reqSecured));\n      },\n      err => reject(err),\n    );\n  });\n}\n"],"file":"create.js"}
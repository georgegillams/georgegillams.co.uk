{"version":3,"sources":["../../../../../server/api/actions/widget/load.js"],"names":["initialWidgets","id","color","sprocketCount","owner","getWidgets","req","widgets","session","load","Promise","resolve","reject","setTimeout","Math","random"],"mappings":";;;;;;;AAAA,IAAMA,cAAc,GAAG,CACrB;AAAEC,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,KAAK,EAAE,KAAhB;AAAuBC,EAAAA,aAAa,EAAE,CAAtC;AAAyCC,EAAAA,KAAK,EAAE;AAAhD,CADqB,EAErB;AAAEH,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,KAAK,EAAE,OAAhB;AAAyBC,EAAAA,aAAa,EAAE,CAAxC;AAA2CC,EAAAA,KAAK,EAAE;AAAlD,CAFqB,EAGrB;AAAEH,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,KAAK,EAAE,OAAhB;AAAyBC,EAAAA,aAAa,EAAE,CAAxC;AAA2CC,EAAAA,KAAK,EAAE;AAAlD,CAHqB,EAIrB;AAAEH,EAAAA,EAAE,EAAE,CAAN;AAASC,EAAAA,KAAK,EAAE,MAAhB;AAAwBC,EAAAA,aAAa,EAAE,CAAvC;AAA0CC,EAAAA,KAAK,EAAE;AAAjD,CAJqB,CAAvB;;AAOO,SAASC,UAAT,CAAoBC,GAApB,EAAyB;AAC9B,MAAIC,OAAO,GAAGD,GAAG,CAACE,OAAJ,CAAYD,OAA1B;;AACA,MAAI,CAACA,OAAL,EAAc;AACZA,IAAAA,OAAO,GAAGP,cAAV;AACAM,IAAAA,GAAG,CAACE,OAAJ,CAAYD,OAAZ,GAAsBA,OAAtB;AACD;;AACD,SAAOA,OAAP;AACD;;AAEc,SAASE,IAAT,CAAcH,GAAd,EAAmB;AAChC,SAAO,IAAII,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC;AACAC,IAAAA,UAAU,CAAC,YAAM;AACf,UAAIC,IAAI,CAACC,MAAL,KAAgB,IAApB,EAA0B;AACxBH,QAAAA,MAAM,CAAC,sDAAD,CAAN;AACD,OAFD,MAEO;AACLD,QAAAA,OAAO,CAACN,UAAU,CAACC,GAAD,CAAX,CAAP;AACD;AACF,KANS,EAMP,IANO,CAAV,CAFsC,CAQ5B;AACX,GATM,CAAP;AAUD","sourcesContent":["const initialWidgets = [\n  { id: 1, color: 'Red', sprocketCount: 7, owner: 'John' },\n  { id: 2, color: 'Taupe', sprocketCount: 1, owner: 'George' },\n  { id: 3, color: 'Green', sprocketCount: 8, owner: 'Ringo' },\n  { id: 4, color: 'Blue', sprocketCount: 2, owner: 'Paul' },\n];\n\nexport function getWidgets(req) {\n  let widgets = req.session.widgets;\n  if (!widgets) {\n    widgets = initialWidgets;\n    req.session.widgets = widgets;\n  }\n  return widgets;\n}\n\nexport default function load(req) {\n  return new Promise((resolve, reject) => {\n    // make async call to database\n    setTimeout(() => {\n      if (Math.random() < 0.33) {\n        reject('Widget load fails 33% of the time. You were unlucky.');\n      } else {\n        resolve(getWidgets(req));\n      }\n    }, 1000); // simulate async load\n  });\n}\n"],"file":"load.js"}
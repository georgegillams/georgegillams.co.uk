{"version":3,"sources":["../../../../../server/api/actions/data-management/performRestoration.js"],"names":["performRestoration","data","Promise","resolve","reject","promises","Object","keys","forEach","key","push","res","rej","redis","del","length","newData","map","d","JSON","stringify","rpush","all","then"],"mappings":";;;;;;;;;;;AAAA;;AAEe,SAASA,kBAAT,CAA4BC,IAA5B,EAAkC;AAC/C,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,QAAMC,QAAQ,GAAG,EAAjB;AACAC,IAAAA,MAAM,CAACC,IAAP,CAAYN,IAAZ,EAAkBO,OAAlB,CAA0B,UAAAC,GAAG,EAAI;AAC/BJ,MAAAA,QAAQ,CAACK,IAAT,CACE,IAAIR,OAAJ,CAAY,UAACS,GAAD,EAAMC,GAAN,EAAc;AACxBC,0BAAMC,GAAN,CAAUL,GAAV;;AACA,YAAIR,IAAI,CAACQ,GAAD,CAAJ,CAAUM,MAAV,GAAmB,CAAvB,EAA0B;AACxB,cAAMC,OAAO,GAAGf,IAAI,CAACQ,GAAD,CAAJ,CAAUQ,GAAV,CAAc,UAAAC,CAAC,EAAI;AACjC,mBAAOC,IAAI,CAACC,SAAL,CAAeF,CAAf,CAAP;AACD,WAFe,CAAhB;;AAGAL,4BAAMQ,KAAN,EAAaZ,GAAb,6CAAqBO,OAArB;AACD;;AACDL,QAAAA,GAAG,CAAC,IAAD,CAAH;AACD,OATD,CADF;AAYD,KAbD;AAcAT,IAAAA,OAAO,CAACoB,GAAR,CAAYjB,QAAZ,EAAsBkB,IAAtB,CAA2B,YAAM;AAC/BpB,MAAAA,OAAO,CAAC,IAAD,CAAP;AACD,KAFD;AAGD,GAnBM,CAAP;AAoBD","sourcesContent":["import redis from 'utils/redis';\n\nexport default function performRestoration(data) {\n  return new Promise((resolve, reject) => {\n    const promises = [];\n    Object.keys(data).forEach(key => {\n      promises.push(\n        new Promise((res, rej) => {\n          redis.del(key);\n          if (data[key].length > 0) {\n            const newData = data[key].map(d => {\n              return JSON.stringify(d);\n            });\n            redis.rpush([key, ...newData]);\n          }\n          res(true);\n        }),\n      );\n    });\n    Promise.all(promises).then(() => {\n      resolve(true);\n    });\n  });\n}\n"],"file":"performRestoration.js"}
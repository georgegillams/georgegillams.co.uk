{"version":3,"sources":["../../../../server/api/actions/loadAuth.js"],"names":["loadAuth","req","reqSecured","usersAllowedAttributes","Promise","resolve","then","user","emailFingerprint","hash"],"mappings":";;;;;;;;;AAAA;;AAEA;;AACA;;AAEe,SAASA,QAAT,CAAkBC,GAAlB,EAAuB;AACpC,MAAMC,UAAU,GAAG,2BAAUD,GAAV,EAAeE,kCAAf,CAAnB;AACA,SAAO,IAAIC,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5B,oCAAeH,UAAf,EAA2BI,IAA3B,CAAgC,UAAAC,IAAI,EAAI;AACtC,UAAIA,IAAJ,EAAU;AACRA,QAAAA,IAAI,CAACC,gBAAL,GAAwB,IAAxB;AACAD,QAAAA,IAAI,CAACE,IAAL,GAAY,IAAZ;AACD;;AACDJ,MAAAA,OAAO,CAACE,IAAD,CAAP;AACD,KAND;AAOD,GARM,CAAP;AASD","sourcesContent":["import usersAllowedAttributes from './users/usersAllowedAttributes';\n\nimport authentication from 'utils/authentication';\nimport reqSecure from 'utils/reqSecure';\n\nexport default function loadAuth(req) {\n  const reqSecured = reqSecure(req, usersAllowedAttributes);\n  return new Promise(resolve => {\n    authentication(reqSecured).then(user => {\n      if (user) {\n        user.emailFingerprint = null;\n        user.hash = null;\n      }\n      resolve(user);\n    });\n  });\n}\n"],"file":"loadAuth.js"}
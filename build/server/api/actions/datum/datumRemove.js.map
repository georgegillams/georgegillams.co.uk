{"version":3,"sources":["../../../../../server/api/actions/datum/datumRemove.js"],"names":["datumRemove","settings","req","Promise","resolve","reject","then","data","body","id","existingValue","existingValueIndex","value","JSON","parse","stringify","deleted","RESOURCE_NOT_FOUND","err"],"mappings":";;;;;;;;;AAAA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AAEe,SAASA,WAAT,CAAqBC,QAArB,EAA+BC,GAA/B,EAAoC;AACjD,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,+BAAUJ,QAAV,EAAoBC,GAApB,EAAyBI,IAAzB,CACE,UAAAC,IAAI,EAAI;AAAA,kBACwC,iBAAKA,IAAL,EAAWL,GAAG,CAACM,IAAJ,CAASC,EAApB,CADxC;AAAA,UACEC,aADF,SACEA,aADF;AAAA,UACiBC,kBADjB,SACiBA,kBADjB;;AAGN,UAAID,aAAJ,EAAmB;AACjB,YAAME,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeL,aAAf,CAAX,CAAd;AACAE,QAAAA,KAAK,CAACI,OAAN,GAAgB,IAAhB;AAEAZ,QAAAA,OAAO,CAAC,6BAAYH,QAAZ,EAAsB;AAAEO,UAAAA,IAAI,EAAEI;AAAR,SAAtB,CAAD,CAAP;AACD,OALD,MAKO;AACLP,QAAAA,MAAM,CAACY,6BAAD,CAAN;AACD;AACF,KAZH,EAaE,UAAAC,GAAG,EAAI;AACLb,MAAAA,MAAM,CAACa,GAAD,CAAN;AACD,KAfH;AAiBD,GAlBM,CAAP;AAmBD","sourcesContent":["import datumLoad from './datumLoad';\nimport datumUpdate from './datumUpdate';\n\nimport { RESOURCE_NOT_FOUND } from 'helpers/constants';\nimport redis from 'utils/redis';\nimport { find } from 'utils/find';\nimport setContentLastUpdatedTimestamp from 'utils/setContentLastUpdatedTimestamp';\n\nexport default function datumRemove(settings, req) {\n  return new Promise((resolve, reject) => {\n    datumLoad(settings, req).then(\n      data => {\n        const { existingValue, existingValueIndex } = find(data, req.body.id);\n\n        if (existingValue) {\n          const value = JSON.parse(JSON.stringify(existingValue));\n          value.deleted = true;\n\n          resolve(datumUpdate(settings, { body: value }));\n        } else {\n          reject(RESOURCE_NOT_FOUND);\n        }\n      },\n      err => {\n        reject(err);\n      },\n    );\n  });\n}\n"],"file":"datumRemove.js"}
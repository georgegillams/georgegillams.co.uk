{"version":3,"sources":["../../../server/middlewares/addProdMiddlewares.js"],"names":["path","require","express","compression","module","exports","addProdMiddlewares","app","options","publicPath","outputPath","resolve","process","cwd","use","get","req","res","sendFile"],"mappings":";;AAAA,IAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AAEA,IAAMC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAAvB;;AACA,IAAME,WAAW,GAAGF,OAAO,CAAC,aAAD,CAA3B;;AAEAG,MAAM,CAACC,OAAP,GAAiB,SAASC,kBAAT,CAA4BC,GAA5B,EAAiCC,OAAjC,EAA0C;AACzD,MAAMC,UAAU,GAAGD,OAAO,CAACC,UAAR,IAAsB,GAAzC;AACA,MAAMC,UAAU,GAAGF,OAAO,CAACE,UAAR,IAAsBV,IAAI,CAACW,OAAL,CAAaC,OAAO,CAACC,GAAR,EAAb,EAA4B,OAA5B,CAAzC,CAFyD,CAIzD;AACA;AACA;;AACAN,EAAAA,GAAG,CAACO,GAAJ,CAAQX,WAAW,EAAnB;AACAI,EAAAA,GAAG,CAACO,GAAJ,CAAQL,UAAR,EAAoBP,OAAO,UAAP,CAAeQ,UAAf,CAApB;AAEAH,EAAAA,GAAG,CAACQ,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN;AAAA,WACXA,GAAG,CAACC,QAAJ,CAAalB,IAAI,CAACW,OAAL,CAAaD,UAAb,EAAyB,YAAzB,CAAb,CADW;AAAA,GAAb;AAGD,CAbD","sourcesContent":["const path = require('path');\n\nconst express = require('express');\nconst compression = require('compression');\n\nmodule.exports = function addProdMiddlewares(app, options) {\n  const publicPath = options.publicPath || '/';\n  const outputPath = options.outputPath || path.resolve(process.cwd(), 'build');\n\n  // compression middleware compresses your server responses which makes them\n  // smaller (applies also to assets). You can read more about that technique\n  // and other good practices on official Express.js docs http://mxs.is/googmy\n  app.use(compression());\n  app.use(publicPath, express.static(outputPath));\n\n  app.get('*', (req, res) =>\n    res.sendFile(path.resolve(outputPath, 'index.html')),\n  );\n};\n"],"file":"addProdMiddlewares.js"}
(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"./app/containers/AdminBlogEdit/Container.js":function(e,t,o){"use strict";var r=o("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),n=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(o("./node_modules/@babel/runtime/helpers/extends.js")),a=n(o("./node_modules/@babel/runtime/helpers/jsx.js")),l=n(o("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),u=n(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=n(o("./node_modules/@babel/runtime/helpers/createClass.js")),i=n(o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=n(o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),g=n(o("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),p=n(o("./node_modules/@babel/runtime/helpers/inherits.js")),b=n(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),B=r(o("./node_modules/react/index.js")),m=(n(o("./node_modules/prop-types/index.js")),o("./node_modules/react-helmet/lib/Helmet.js")),f=o("./node_modules/bpk-react-utils/index.js"),E=n(o("./app/containers/AdminBlogEdit/Skeleton.js")),j=(o("./node_modules/gg-components/LoadingIndicator/index.js"),n(o("./app/components/Blogs/index.js")),o("./node_modules/gg-components/Cards/index.js"),o("./node_modules/gg-components/Button/index.js"),o("./node_modules/gg-components/Typography/index.js")),x=(o("./node_modules/gg-components/Code/index.js"),n(o("./app/components/Ticket/index.js")),o("./node_modules/gg-components/Auth/index.js")),_=o("./app/components/Forms/index.js"),h=n(o("./app/containers/pages.scss")),O=((0,f.cssModules)(h.default),(0,a.default)(m.Helmet,{title:"Admin - blog"})),R=function(e){function t(e){var o;return(0,u.default)(this,t),o=(0,i.default)(this,(0,c.default)(t).call(this,e)),(0,b.default)((0,g.default)(o),"componentDidMount",(function(){var e=o.props.match.params.id;e&&o.props.loadBlog(e)})),o.state={newBlog:null},o}return(0,p.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this,t=this.props,o=t.setLoginRedirect,r=t.user,n=t.userLoading,u=t.className,d=t.loadBlog,i=t.updateBlog,c=t.createBlog,g=t.blog,p=t.loadingBlog,b=t.loadBlogSuccess,m=t.loadBlogError,f=t.updatingBlog,h=t.updateBlogSuccess,R=t.updateBlogError,S=t.creatingBlog,v=t.createBlogSuccess,A=t.createBlogError,y=(0,l.default)(t,["setLoginRedirect","user","userLoading","className","loadBlog","updateBlog","createBlog","blog","loadingBlog","loadBlogSuccess","loadBlogError","updatingBlog","updateBlogSuccess","updateBlogError","creatingBlog","createBlogSuccess","createBlogError"]),C=[];u&&C.push(u);var w=B.default.createElement("div",(0,s.default)({className:C.join(" ")},y),(0,a.default)(x.AdminOnly,{user:r,setLoginRedirect:function(){return o("admin/blog")}},void 0,(0,a.default)(j.Section,{name:"Admin - blog"},void 0,(0,a.default)(_.CreateBlogForm,{disabled:f||S||!this.state.newBlog,blog:this.state.newBlog||g||{},onDataChanged:function(t){return e.setState({newBlog:t})},onSubmit:function(){g?i(e.state.newBlog):c(e.state.newBlog)},submitLabel:g?"Update blog":"Create blog"}))));return(0,a.default)(B.Fragment,{},void 0,O,(0,a.default)(x.LoadingCover,{loadingSkeleton:E.default,loading:n||p},void 0,w),(0,a.default)(x.DebugObject,{debugTitle:"Admin blog",debugObject:{setLoginRedirect:o,user:r,userLoading:n,className:u,loadBlog:d,updateBlog:i,createBlog:c,blog:g,loadingBlog:p,loadBlogSuccess:b,loadBlogError:m,updatingBlog:f,updateBlogSuccess:h,updateBlogError:R,creatingBlog:S,createBlogSuccess:v,createBlogError:A}}))}}]),t}(B.default.Component);t.default=R,e.exports=t.default},"./app/containers/AdminBlogEdit/actionMeta.js":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={key:"blog_edit",actionDefinitions:[{LOAD_BLOG:"tbd",attributes:["blogId"],stateMutations:{loadingBlog:!0,loadBlogError:null,blogId:function(e){return e.blogId}}},{LOAD_BLOG_REGISTER_SUCCESS:"tbd",attributes:["blog"],stateMutations:{loadingBlog:!1,loadBlogSuccess:!0,blog:function(e){return e.blog}}},{LOAD_BLOG_REGISTER_ERROR:"tbd",attributes:["loadBlogError"],stateMutations:{loadingBlog:!1,loadBlogError:function(e){return e.loadBlogError}}},{UPDATE_BLOG:"tbd",attributes:["newBlog"],stateMutations:{updatingBlog:!0,updateBlogError:null,newBlog:function(e){return e.newBlog}}},{UPDATE_BLOG_REGISTER_SUCCESS:"tbd",attributes:[],stateMutations:{updatingBlog:!1,updateBlogSuccess:!0}},{UPDATE_BLOG_REGISTER_ERROR:"tbd",attributes:["updateBlogError"],stateMutations:{updatingBlog:!1,updateBlogError:function(e){return e.updateBlogError}}},{CREATE_BLOG:"tbd",attributes:["newBlog"],stateMutations:{creatingBlog:!0,createBlogError:null,newBlog:function(e){return e.newBlog}}},{CREATE_BLOG_REGISTER_SUCCESS:"tbd",attributes:[],stateMutations:{creatingBlog:!1,createBlogSuccess:!0}},{CREATE_BLOG_REGISTER_ERROR:"tbd",attributes:["createBlogError"],stateMutations:{creatingBlog:!1,createBlogError:function(e){return e.createBlogError}}}]};t.default=r,e.exports=t.default},"./app/containers/AdminBlogEdit/index.js":function(e,t,o){"use strict";var r=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=r(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),s=r(o("./app/containers/App/selectors.js")),a=o("./helpers/redux/index.js"),l=r(o("./app/containers/AdminBlogEdit/actionMeta.js")),u=o("./app/containers/AdminBlogEdit/redux-definitions.js"),d=r(o("./app/containers/AdminBlogEdit/saga.js")),i=r(o("./app/containers/AdminBlogEdit/Container.js"));function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function g(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach((function(t){(0,n.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}e.exports=(0,a.composeContainer)(i.default,l.default.key,g({},u.selectors,{},s.default),g({},u.actions),u.reducer,d.default)},"./app/containers/AdminBlogEdit/redux-definitions.js":function(e,t,o){"use strict";var r=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=r(o("./app/containers/AdminBlogEdit/actionMeta.js")),s=r(o("./helpers/redux/index.js"));e.exports=(0,s.default)(n.default)},"./app/containers/AdminBlogEdit/saga.js":function(e,t,o){"use strict";var r=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.doLoadBlog=M,t.doUpdateBlog=L,t.doCreateBlog=k,t.default=T;var n=r(o("./node_modules/@babel/runtime/regenerator/index.js")),s=o("./app/containers/AdminBlogEdit/redux-definitions.js"),a=o("./node_modules/redux-saga/dist/redux-saga-effects-npm-proxy.cjs.js"),l=o("./app/containers/RequestStatusWrapper/actions.js"),u=o("./helpers/constants.js"),d=r(o("./app/utils/request.js")),i=n.default.mark(M),c=n.default.mark(L),g=n.default.mark(k),p=n.default.mark(T),b=s.constants.LOAD_BLOG,B=s.constants.UPDATE_BLOG,m=s.constants.CREATE_BLOG,f=s.actions.loadBlogRegisterSuccess,E=s.actions.loadBlogRegisterError,j=s.actions.updateBlogRegisterError,x=s.actions.updateBlogRegisterSuccess,_=s.actions.createBlogRegisterSuccess,h=s.actions.createBlogRegisterError,O=s.selectors.makeSelectBlogId,R=s.selectors.makeSelectNewBlog,S={type:"success",message:"Blog created!"},v={type:"error",message:"Could not create blog."},A={type:"success",message:"Blog loaded!"},y={type:"error",message:"Could not load blog."},C={type:"success",message:"Blog updated!"},w={type:"error",message:"Could not save blog."};function M(){var e,t,o;return n.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,a.select)(O());case 2:return e=r.sent,t="".concat(u.API_ENDPOINT,"/blogs/loadSingle?id=").concat(e),r.prev=4,r.next=7,(0,a.call)(d.default,t,{method:"GET"});case 7:if(!(o=r.sent).error){r.next=15;break}return r.next=11,(0,a.put)(E(o));case 11:return r.next=13,(0,a.put)((0,l.pushMessage)(y));case 13:r.next=19;break;case 15:return r.next=17,(0,a.put)(f(o));case 17:return r.next=19,(0,a.put)((0,l.pushMessage)(A));case 19:r.next=27;break;case 21:return r.prev=21,r.t0=r.catch(4),r.next=25,(0,a.put)(E(r.t0));case 25:return r.next=27,(0,a.put)((0,l.pushMessage)(u.COMMUNICATION_ERROR_MESSAGE));case 27:case"end":return r.stop()}}),i,null,[[4,21]])}function L(){var e,t,o;return n.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,a.select)(R());case 2:return e=r.sent,t="".concat(u.API_ENDPOINT,"/blogs/update"),r.prev=4,r.next=7,(0,a.call)(d.default,t,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});case 7:if(!(o=r.sent).error){r.next=15;break}return r.next=11,(0,a.put)(j(o));case 11:return r.next=13,(0,a.put)((0,l.pushMessage)(w));case 13:r.next=19;break;case 15:return r.next=17,(0,a.put)(x(o));case 17:return r.next=19,(0,a.put)((0,l.pushMessage)(C));case 19:r.next=27;break;case 21:return r.prev=21,r.t0=r.catch(4),r.next=25,(0,a.put)(j(r.t0));case 25:return r.next=27,(0,a.put)((0,l.pushMessage)(u.COMMUNICATION_ERROR_MESSAGE));case 27:case"end":return r.stop()}}),c,null,[[4,21]])}function k(){var e,t,o;return n.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,a.select)(R());case 2:return e=r.sent,t="".concat(u.API_ENDPOINT,"/blogs/create"),r.prev=4,r.next=7,(0,a.call)(d.default,t,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});case 7:if(!(o=r.sent).error){r.next=15;break}return r.next=11,(0,a.put)(h(o));case 11:return r.next=13,(0,a.put)((0,l.pushMessage)(v));case 13:r.next=20;break;case 15:return r.next=17,(0,a.put)(_(o));case 17:return r.next=19,(0,a.put)((0,l.pushMessage)(S));case 19:window.location="/admin/blog/edit/".concat(o.id);case 20:r.next=28;break;case 22:return r.prev=22,r.t0=r.catch(4),r.next=26,(0,a.put)(h(r.t0));case 26:return r.next=28,(0,a.put)((0,l.pushMessage)(u.COMMUNICATION_ERROR_MESSAGE));case 28:case"end":return r.stop()}}),g,null,[[4,22]])}function T(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.takeLatest)(b,M);case 2:return e.next=4,(0,a.takeLatest)(B,L);case 4:return e.next=6,(0,a.takeLatest)(m,k);case 6:case"end":return e.stop()}}),p)}}}]);
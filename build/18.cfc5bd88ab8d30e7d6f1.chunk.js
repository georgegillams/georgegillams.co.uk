(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"./app/containers/AdminUserEdit/Container.js":function(e,t,s){"use strict";var r=s("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(s("./node_modules/@babel/runtime/helpers/extends.js")),d=n(s("./node_modules/@babel/runtime/helpers/jsx.js")),a=n(s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),i=n(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),u=n(s("./node_modules/@babel/runtime/helpers/createClass.js")),l=n(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=n(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=n(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),m=n(s("./node_modules/@babel/runtime/helpers/inherits.js")),f=n(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),U=r(s("./node_modules/react/index.js")),b=(n(s("./node_modules/prop-types/index.js")),s("./node_modules/react-helmet/lib/Helmet.js")),g=s("./node_modules/bpk-react-utils/index.js"),j=n(s("./app/containers/AdminUserEdit/Skeleton.js")),E=(s("./node_modules/gg-components/LoadingIndicator/index.js"),s("./node_modules/gg-components/Cards/index.js"),s("./node_modules/gg-components/Button/index.js"),s("./node_modules/gg-components/Typography/index.js")),h=s("./node_modules/gg-components/FormBuilder/index.js"),_=(s("./node_modules/gg-components/Code/index.js"),n(s("./app/components/Ticket/index.js")),s("./node_modules/gg-components/Auth/index.js")),x=(s("./app/components/Forms/index.js"),n(s("./app/containers/pages.scss"))),S=s("./helpers/constants.js"),R=((0,g.cssModules)(x.default),(0,d.default)(b.Helmet,{title:"Admin - edit user"})),O=function(e){function t(e){var s;return(0,i.default)(this,t),s=(0,l.default)(this,(0,c.default)(t).call(this,e)),(0,f.default)((0,p.default)(s),"componentDidMount",(function(){var e=s.props.id||s.props.match.params.id;s.props.loadUsers(),s.setState({usertoeditId:e})})),s.state={newUsertoedit:null},s}return(0,m.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.props,s=t.id,r=t.match,n=t.onUserUpdateSuccess,i=t.setLoginRedirect,u=t.user,l=t.userLoading,c=t.className,p=t.loadUsers,m=t.users,f=t.loadingUsers,b=t.loadUserSuccess,g=t.loadUserError,x=t.updateUsertoedit,O=t.updatingUsertoedit,v=t.updateUsertoeditSuccess,y=t.updateUsertoeditError,A=(0,a.default)(t,["id","match","onUserUpdateSuccess","setLoginRedirect","user","userLoading","className","loadUsers","users","loadingUsers","loadUserSuccess","loadUserError","updateUsertoedit","updatingUsertoedit","updateUsertoeditSuccess","updateUsertoeditError"]),w=[];c&&w.push(c);var D=m&&m.filter((function(t){return t.id===e.state.usertoeditId}))[0],T=U.default.createElement("div",(0,o.default)({className:w.join(" ")},A),(0,d.default)(_.AdminOnly,{user:u,setLoginRedirect:function(){return i("admin/users")}},void 0,(0,d.default)(E.Section,{name:"Edit user ".concat(D&&D.id)},void 0,(0,d.default)(h.FormBuilder,{entity:this.state.newUsertoedit||D||{},formFields:[{id:"name",name:"Name",validationRegex:S.UNAME_REGEX,show:!0},{id:"uname",name:"Display name",validationRegex:S.UNAME_REGEX,show:!0},{id:"email",name:"Email",validationRegex:S.EMAIL_REGEX,show:!0},{id:"admin",name:"Admin",type:"CHECKBOX",show:!0}],submitLabel:"Update user",onSubmit:function(){return x(e.state.newUsertoedit,n)},onDataChanged:function(t){e.setState({newUsertoedit:t})},disabled:O||!this.state.newUsertoedit}))));return(0,d.default)(U.Fragment,{},void 0,R,(0,d.default)(_.LoadingCover,{loadingSkeleton:j.default,loading:l||!m},void 0,T),(0,d.default)(_.DebugObject,{debugTitle:"Admin usertoedit",debugObject:{id:s,match:r,onUserUpdateSuccess:n,setLoginRedirect:i,user:u,userLoading:l,className:c,users:m,loadUsers:p,loadingUsers:f,loadUserSuccess:b,loadUserError:g,updateUsertoedit:x,updatingUsertoedit:O,updateUsertoeditSuccess:v,updateUsertoeditError:y}}))}}]),t}(U.default.Component);t.default=O,e.exports=t.default},"./app/containers/AdminUserEdit/actionMeta.js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={key:"usertoedit_edit",actionDefinitions:[{UPDATE_USERTOEDIT:"tbd",attributes:["newUsertoedit","onUpdateUsertoeditRegisterSuccess"],stateMutations:{updatingUsertoedit:!0,updateUsertoeditError:null,newUsertoedit:function(e){return e.newUsertoedit},onUpdateUsertoeditRegisterSuccess:function(e){return e.onUpdateUsertoeditRegisterSuccess}}},{UPDATE_USERTOEDIT_REGISTER_SUCCESS:"tbd",attributes:[],stateMutations:{updatingUsertoedit:!1,updateUsertoeditSuccess:!0,onUpdateUsertoeditRegisterSuccess:null}},{UPDATE_USERTOEDIT_REGISTER_ERROR:"tbd",attributes:["updateUsertoeditError"],stateMutations:{updatingUsertoedit:!1,updateUsertoeditError:function(e){return e.updateUsertoeditError},onUpdateUsertoeditRegisterSuccess:null}}]};t.default=r,e.exports=t.default},"./app/containers/AdminUserEdit/index.js":function(e,t,s){"use strict";var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),o=r(s("./app/containers/App/selectors.js")),d=s("./helpers/redux/index.js"),a=r(s("./app/containers/AdminUserEdit/actionMeta.js")),i=s("./app/containers/AdminUserEdit/redux-definitions.js"),u=s("./app/containers/AdminUsers/redux-definitions.js"),l=r(s("./app/containers/AdminUserEdit/saga.js")),c=r(s("./app/containers/AdminUserEdit/Container.js"));function p(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?p(Object(s),!0).forEach((function(t){(0,n.default)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}e.exports=(0,d.composeContainer)(c.default,a.default.key,m({},i.selectors,{},u.selectors,{},o.default),m({},i.actions,{},u.actions),i.reducer,l.default)},"./app/containers/AdminUserEdit/redux-definitions.js":function(e,t,s){"use strict";var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=r(s("./app/containers/AdminUserEdit/actionMeta.js")),o=r(s("./helpers/redux/index.js"));e.exports=(0,o.default)(n.default)},"./app/containers/AdminUserEdit/saga.js":function(e,t,s){"use strict";var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.doUpdateUsertoedit=j,t.default=E;var n=r(s("./node_modules/@babel/runtime/regenerator/index.js")),o=s("./app/containers/AdminUserEdit/redux-definitions.js"),d=s("./node_modules/redux-saga/dist/redux-saga-effects-npm-proxy.cjs.js"),a=s("./app/containers/RequestStatusWrapper/actions.js"),i=s("./helpers/constants.js"),u=r(s("./app/utils/request.js")),l=n.default.mark(j),c=n.default.mark(E),p=(o.constants.LOAD_USERTOEDIT,o.constants.UPDATE_USERTOEDIT),m=o.actions.updateUsertoeditRegisterError,f=o.actions.updateUsertoeditRegisterSuccess,U=o.selectors.makeSelectNewUsertoedit,b=o.selectors.makeSelectOnUpdateUsertoeditRegisterSuccess,g={type:"success",message:"User updated!"};function j(){var e,t,s,r;return n.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,d.select)(U());case 2:return e=n.sent,n.next=5,(0,d.select)(b());case 5:return t=n.sent,s="".concat(i.API_ENDPOINT,"/users/update"),n.prev=7,n.next=10,(0,d.call)(u.default,s,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});case 10:if(!(r=n.sent).error){n.next=18;break}return n.next=14,(0,d.put)(m(r));case 14:return n.next=16,(0,d.put)((0,a.pushMessage)({type:error,message:r.errorMessage}));case 16:n.next=23;break;case 18:return n.next=20,(0,d.put)(f(r));case 20:return t&&t(),n.next=23,(0,d.put)((0,a.pushMessage)(g));case 23:n.next=31;break;case 25:return n.prev=25,n.t0=n.catch(7),n.next=29,(0,d.put)(m(n.t0));case 29:return n.next=31,(0,d.put)((0,a.pushMessage)(i.COMMUNICATION_ERROR_MESSAGE));case 31:case"end":return n.stop()}}),l,null,[[7,25]])}function E(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.takeLatest)(p,j);case 2:case"end":return e.stop()}}),c)}}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"./app/containers/AdminNotifications/Container.js":function(e,t,i){"use strict";var n=i("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),o=i("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(i("./node_modules/@babel/runtime/helpers/extends.js")),s=o(i("./node_modules/@babel/runtime/helpers/jsx.js")),r=o(i("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),c=o(i("./node_modules/@babel/runtime/helpers/classCallCheck.js")),u=o(i("./node_modules/@babel/runtime/helpers/createClass.js")),d=o(i("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=o(i("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),f=o(i("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),p=o(i("./node_modules/@babel/runtime/helpers/inherits.js")),N=o(i("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=n(i("./node_modules/react/index.js")),b=(o(i("./node_modules/prop-types/index.js")),i("./node_modules/react-helmet/lib/Helmet.js")),g=i("./node_modules/bpk-react-utils/index.js"),j=o(i("./app/containers/AdminNotifications/Skeleton.js")),E=o(i("./app/containers/AdminNotifications/NotificationEntity.js")),_=i("./node_modules/gg-components/Button/index.js"),h=i("./node_modules/gg-components/Typography/index.js"),x=i("./node_modules/gg-components/FormBuilder/index.js"),O=i("./helpers/constants.js"),T=i("./node_modules/gg-components/Auth/index.js"),R=o(i("./app/containers/pages.scss")),I=(0,g.cssModules)(R.default),S=(0,s.default)("br",{}),v=(0,s.default)("br",{}),y=(0,s.default)("br",{}),A=(0,s.default)("br",{}),C=(0,s.default)(b.Helmet,{title:"Admin - notifications"}),M=function(e){function t(e){var i;return(0,c.default)(this,t),i=(0,d.default)(this,(0,l.default)(t).call(this,e)),(0,N.default)((0,f.default)(i),"componentDidMount",(function(){i.props.loadNotifications()})),i.state={newNotification:{}},i}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.props,i=t.setLoginRedirect,n=t.user,o=t.userLoading,c=t.className,u=t.notifications,d=t.loadNotifications,l=t.loadingNotifications,f=t.loadNotificationsSuccess,p=t.loadNotificationsError,N=t.createNotification,b=t.creatingNotification,g=t.deleteNotification,R=t.deletingNotification,M=(0,r.default)(t,["setLoginRedirect","user","userLoading","className","notifications","loadNotifications","loadingNotifications","loadNotificationsSuccess","loadNotificationsError","createNotification","creatingNotification","deleteNotification","deletingNotification"]),k=[];c&&k.push(c);var w=m.default.createElement("div",(0,a.default)({className:k.join(" ")},M),(0,s.default)(T.AdminOnly,{user:n,setLoginRedirect:function(){return i("admin/notification")}},void 0,(0,s.default)(h.Section,{name:"Admin - notifications"},void 0,(0,s.default)(_.Button,{onClick:function(){return d()},large:!0},void 0,"Reload notifications"),S,v,(0,s.default)(x.FormBuilder,{entity:this.state.newNotification,submitLabel:"Create notification",formFields:[{id:"type",name:"Type",validationRegex:O.STRING_REGEX,show:!0},{id:"message",name:"Messsage",validationRegex:O.STRING_REGEX,show:!0}],disabled:b,onDataChanged:function(t){e.setState({newNotification:t})},onSubmit:function(){N(e.state.newNotification)}}),u&&u.map&&u.map((function(e){return(0,s.default)(E.default,{entity:e,className:I("pages__component"),onNotificationUpdateSuccess:d},void 0,(0,s.default)(_.Button,{large:!0,disabled:R,href:"/admin/notifications/".concat(e.id)},void 0,"Edit notification on dedicated page"),y,A,(0,s.default)(_.Button,{large:!0,destructive:!0,disabled:R,onClick:function(){return g(e)}},void 0,"Delete"))})))));return(0,s.default)(m.Fragment,{},void 0,C,(0,s.default)(T.LoadingCover,{loadingSkeleton:j.default,loading:o||!u&&l},void 0,w),(0,s.default)(T.DebugObject,{debugTitle:"Admin notifications",debugObject:{setLoginRedirect:i,user:n,userLoading:o,className:c,loadNotifications:d,notifications:u,loadingNotifications:l,loadNotificationsSuccess:f,loadNotificationsError:p}}))}}]),t}(m.default.Component);t.default=M,M.defaultProps={notifications:null,loadNotificationsError:null,loadNotificationsSuccess:!1,loadingNotifications:!1,className:null,creatingNotification:!1,deletingNotification:!1,loggingIn:!1,user:null,userLoading:!1},e.exports=t.default},"./app/containers/AdminNotifications/NotificationEntity.js":function(e,t,i){"use strict";var n=i("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),o=i("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(i("./node_modules/@babel/runtime/helpers/jsx.js")),s=o(i("./node_modules/@babel/runtime/helpers/slicedToArray.js")),r=o(i("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),c=n(i("./node_modules/react/index.js")),u=o(i("./app/containers/AdminNotificationEdit/Loadable.js")),d=i("./node_modules/gg-components/Cards/index.js"),l=i("./node_modules/gg-components/Notifications/index.js"),f=i("./node_modules/gg-components/Button/index.js"),p=(i("./helpers/constants.js"),i("./node_modules/gg-components/Auth/index.js")),N=(o(i("./app/containers/pages.scss")),(0,a.default)("br",{})),m=(0,a.default)("br",{}),b=(0,a.default)("br",{}),g=(0,a.default)("br",{}),j=function(e){var t=e.entity,i=e.onNotificationUpdateSuccess,n=e.children,o=(0,r.default)(e,["entity","onNotificationUpdateSuccess","children"]),j=(0,c.useState)(!1),E=(0,s.default)(j,2),_=E[0],h=E[1];return c.default.createElement(d.Card,o,(0,a.default)(p.APIEntity,{name:"more",entityType:"Notification",entity:t}),(0,a.default)(l.NotificationComp,{style:{width:"100%"},type:t.type,deleted:t.deleted},void 0,t.message),N,m,_&&(0,a.default)(u.default,{id:t.id,onNotificationUpdateSuccess:function(){i(),setTimeout((function(){h(!1)}),500)}}),b,g,(0,a.default)(f.Button,{large:!0,onClick:function(){h(!_)}},void 0,_?"Cancel edit":"Edit notification"),n&&n)};t.default=j,e.exports=t.default},"./app/containers/AdminNotifications/actionMeta.js":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={key:"adminNotifications",actionDefinitions:[{LOAD_NOTIFICATIONS:"tbd",attributes:[],stateMutations:{loadingNotifications:!0,loadNotificationsError:null}},{LOAD_NOTIFICATIONS_REGISTER_SUCCESS:"tbd",attributes:["notifications"],stateMutations:{loadingNotifications:!1,loadNotificationsSuccess:!0,notifications:function(e){return e.notifications}}},{LOAD_NOTIFICATIONS_REGISTER_ERROR:"tbd",attributes:["loadNotificationsError"],stateMutations:{loadingNotifications:!1,loadNotificationsSuccess:!1,loadNotificationsError:function(e){return e.loadNotificationsError}}},{CREATE_NOTIFICATION:"tbd",attributes:["newNotification"],stateMutations:{newNotification:function(e){return e.newNotification},creatingNotification:!0,createNotificationError:null}},{CREATE_NOTIFICATION_REGISTER_SUCCESS:"tbd",attributes:[],stateMutations:{creatingNotification:!1,createNotificationSuccess:!0}},{CREATE_NOTIFICATION_REGISTER_ERROR:"tbd",attributes:["createNotificationError"],stateMutations:{creatingNotification:!1,createNotificationSuccess:!1,createNotificationError:function(e){return e.createNotificationError}}},{DELETE_NOTIFICATION:"tbd",attributes:["notificationToDelete"],stateMutations:{notificationToDelete:function(e){return e.notificationToDelete},deletingNotification:!0,deleteNotificationError:null}},{DELETE_NOTIFICATION_REGISTER_SUCCESS:"tbd",attributes:[],stateMutations:{deletingNotification:!1,deleteNotificationSuccess:!0}},{DELETE_NOTIFICATION_REGISTER_ERROR:"tbd",attributes:["deleteNotificationError"],stateMutations:{deletingNotification:!1,deleteNotificationSuccess:!1,deleteNotificationError:function(e){return e.deleteNotificationError}}}]};t.default=n,e.exports=t.default},"./app/containers/AdminNotifications/index.js":function(e,t,i){"use strict";var n=i("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=n(i("./node_modules/@babel/runtime/helpers/defineProperty.js")),a=n(i("./app/containers/App/selectors.js")),s=i("./helpers/redux/index.js"),r=n(i("./app/containers/AdminNotifications/actionMeta.js")),c=i("./app/containers/AdminNotifications/redux-definitions.js"),u=n(i("./app/containers/AdminNotifications/saga.js")),d=n(i("./app/containers/AdminNotifications/Container.js"));function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function f(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){(0,o.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}e.exports=(0,s.composeContainer)(d.default,r.default.key,f({},c.selectors,{},a.default),f({},c.actions),c.reducer,u.default)},"./app/containers/AdminNotifications/redux-definitions.js":function(e,t,i){"use strict";var n=i("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=n(i("./app/containers/AdminNotifications/actionMeta.js")),a=n(i("./helpers/redux/index.js"));e.exports=(0,a.default)(o.default)},"./app/containers/AdminNotifications/saga.js":function(e,t,i){"use strict";var n=i("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.doLoadNotifications=M,t.doDeleteNotification=k,t.doCreateNotification=w,t.default=D;var o=n(i("./node_modules/@babel/runtime/regenerator/index.js")),a=i("./app/containers/AdminNotifications/redux-definitions.js"),s=i("./node_modules/redux-saga/dist/redux-saga-effects-npm-proxy.cjs.js"),r=i("./app/containers/RequestStatusWrapper/actions.js"),c=i("./helpers/constants.js"),u=n(i("./app/utils/request.js")),d=o.default.mark(M),l=o.default.mark(k),f=o.default.mark(w),p=o.default.mark(D),N=a.constants.LOAD_NOTIFICATIONS,m=a.constants.CREATE_NOTIFICATION,b=a.constants.DELETE_NOTIFICATION,g=a.actions.loadNotifications,j=a.actions.deleteNotificationRegisterSuccess,E=a.actions.deleteNotificationRegisterError,_=a.actions.createNotificationRegisterSuccess,h=a.actions.createNotificationRegisterError,x=a.actions.loadNotificationsRegisterSuccess,O=a.actions.loadNotificationsRegisterError,T=a.selectors.makeSelectNotificationToDelete,R=a.selectors.makeSelectNewNotification,I={type:"success",message:"Notifications loaded!"},S={type:"error",message:"Could not load notifications."},v={type:"success",message:"Notification deleted!"},y={type:"error",message:"Could not delete notification."},A={type:"success",message:"Notification created!"},C={type:"error",message:"Could not create notification."};function M(){var e,t;return o.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return e="".concat(c.API_ENDPOINT,"/notifications/load"),i.prev=1,i.next=4,(0,s.call)(u.default,e,{method:"GET"});case 4:if(!(t=i.sent).error){i.next=12;break}return i.next=8,(0,s.put)(O(t));case 8:return i.next=10,(0,s.put)((0,r.pushMessage)(S));case 10:i.next=16;break;case 12:return i.next=14,(0,s.put)(x(t));case 14:return i.next=16,(0,s.put)((0,r.pushMessage)(I));case 16:i.next=24;break;case 18:return i.prev=18,i.t0=i.catch(1),i.next=22,(0,s.put)(O(i.t0));case 22:return i.next=24,(0,s.put)((0,r.pushMessage)(c.COMMUNICATION_ERROR_MESSAGE));case 24:case"end":return i.stop()}}),d,null,[[1,18]])}function k(){var e,t,i;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,s.select)(T());case 2:return e=n.sent,t="".concat(c.API_ENDPOINT,"/notifications/remove"),n.prev=4,n.next=7,(0,s.call)(u.default,t,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});case 7:if(!(i=n.sent).error){n.next=15;break}return n.next=11,(0,s.put)(E(i));case 11:return n.next=13,(0,s.put)((0,r.pushMessage)(y));case 13:n.next=21;break;case 15:return n.next=17,(0,s.put)(j(i));case 17:return n.next=19,(0,s.put)((0,r.pushMessage)(v));case 19:return n.next=21,(0,s.put)(g());case 21:n.next=29;break;case 23:return n.prev=23,n.t0=n.catch(4),n.next=27,(0,s.put)(E(n.t0));case 27:return n.next=29,(0,s.put)((0,r.pushMessage)(c.COMMUNICATION_ERROR_MESSAGE));case 29:case"end":return n.stop()}}),l,null,[[4,23]])}function w(){var e,t,i;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,s.select)(R());case 2:return e=n.sent,t="".concat(c.API_ENDPOINT,"/notifications/create"),n.prev=4,n.next=7,(0,s.call)(u.default,t,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});case 7:if(!(i=n.sent).error){n.next=15;break}return n.next=11,(0,s.put)(h(i));case 11:return n.next=13,(0,s.put)((0,r.pushMessage)(C));case 13:n.next=21;break;case 15:return n.next=17,(0,s.put)(_());case 17:return n.next=19,(0,s.put)((0,r.pushMessage)(A));case 19:return n.next=21,(0,s.put)(g());case 21:n.next=29;break;case 23:return n.prev=23,n.t0=n.catch(4),n.next=27,(0,s.put)(h(n.t0));case 27:return n.next=29,(0,s.put)((0,r.pushMessage)(c.COMMUNICATION_ERROR_MESSAGE));case 29:case"end":return n.stop()}}),f,null,[[4,23]])}function D(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.takeLatest)(N,M);case 2:return e.next=4,(0,s.takeLatest)(b,k);case 4:return e.next=6,(0,s.takeLatest)(m,w);case 6:case"end":return e.stop()}}),p)}}}]);
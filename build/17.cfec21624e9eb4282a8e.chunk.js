(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"./app/containers/AdminNotificationEdit/Container.js":function(t,e,i){"use strict";var n=i("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),o=i("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(i("./node_modules/@babel/runtime/helpers/extends.js")),s=o(i("./node_modules/@babel/runtime/helpers/jsx.js")),r=o(i("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),c=o(i("./node_modules/@babel/runtime/helpers/classCallCheck.js")),u=o(i("./node_modules/@babel/runtime/helpers/createClass.js")),d=o(i("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=o(i("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),f=o(i("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),p=o(i("./node_modules/@babel/runtime/helpers/inherits.js")),N=o(i("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=n(i("./node_modules/react/index.js")),b=(o(i("./node_modules/prop-types/index.js")),i("./node_modules/react-helmet/lib/Helmet.js")),g=i("./node_modules/bpk-react-utils/index.js"),j=o(i("./app/containers/AdminNotificationEdit/Skeleton.js")),h=(i("./node_modules/gg-components/LoadingIndicator/index.js"),i("./node_modules/gg-components/Cards/index.js"),i("./node_modules/gg-components/Button/index.js"),i("./node_modules/gg-components/Typography/index.js")),x=(i("./node_modules/gg-components/FormBuilder/index.js"),i("./node_modules/gg-components/Code/index.js"),o(i("./app/components/Ticket/index.js")),i("./node_modules/gg-components/Auth/index.js")),E=i("./app/components/Forms/index.js"),_=o(i("./app/containers/pages.scss")),O=(i("./helpers/constants.js"),(0,g.cssModules)(_.default),(0,s.default)(b.Helmet,{title:"Admin - edit notification"})),S=function(t){function e(t){var i;return(0,c.default)(this,e),i=(0,d.default)(this,(0,l.default)(e).call(this,t)),(0,N.default)((0,f.default)(i),"componentDidMount",(function(){var t=i.props.id||i.props.match.params.id;t&&i.props.loadNotification(t)})),i.state={newNotification:null},i}return(0,p.default)(e,t),(0,u.default)(e,[{key:"render",value:function(){var t=this,e=this.props,i=e.id,n=e.match,o=e.onNotificationUpdateSuccess,c=e.setLoginRedirect,u=e.user,d=e.userLoading,l=e.className,f=e.loadNotification,p=e.updateNotification,N=e.notification,b=e.loadingNotification,g=e.loadNotificationSuccess,_=e.loadNotificationError,S=e.updatingNotification,R=e.updateNotificationSuccess,I=e.updateNotificationError,A=(0,r.default)(e,["id","match","onNotificationUpdateSuccess","setLoginRedirect","user","userLoading","className","loadNotification","updateNotification","notification","loadingNotification","loadNotificationSuccess","loadNotificationError","updatingNotification","updateNotificationSuccess","updateNotificationError"]),v=[];l&&v.push(l);var T=m.default.createElement("div",(0,a.default)({className:v.join(" ")},A),(0,s.default)(x.AdminOnly,{user:u,setLoginRedirect:function(){return c("admin/notification")}},void 0,(0,s.default)(h.Section,{name:"Edit notification ".concat(N&&N.id)},void 0,(0,s.default)(E.CreateNotificationForm,{notification:this.state.newNotification||N||{},submitLabel:"Update notification",onSubmit:function(){return p(t.state.newNotification,o)},onDataChanged:function(e){t.setState({newNotification:e})},disabled:S||!this.state.newNotification}))));return(0,s.default)(m.Fragment,{},void 0,O,(0,s.default)(x.LoadingCover,{loadingSkeleton:j.default,loading:d||b},void 0,T),(0,s.default)(x.DebugObject,{debugTitle:"Admin notification",debugObject:{id:i,match:n,onNotificationUpdateSuccess:o,setLoginRedirect:c,user:u,userLoading:d,className:l,loadNotification:f,updateNotification:p,notification:N,loadingNotification:b,loadNotificationSuccess:g,loadNotificationError:_,updatingNotification:S,updateNotificationSuccess:R,updateNotificationError:I}}))}}]),e}(m.default.Component);e.default=S,t.exports=e.default},"./app/containers/AdminNotificationEdit/actionMeta.js":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={key:"notification_edit",actionDefinitions:[{LOAD_NOTIFICATION:"tbd",attributes:["notificationId"],stateMutations:{loadingNotification:!0,loadNotificationError:null,notificationId:function(t){return t.notificationId}}},{LOAD_NOTIFICATION_REGISTER_SUCCESS:"tbd",attributes:["notification"],stateMutations:{loadingNotification:!1,loadNotificationSuccess:!0,notification:function(t){return t.notification}}},{LOAD_NOTIFICATION_REGISTER_ERROR:"tbd",attributes:["loadNotificationError"],stateMutations:{loadingNotification:!1,loadNotificationError:function(t){return t.loadNotificationError}}},{UPDATE_NOTIFICATION:"tbd",attributes:["newNotification","onUpdateNotificationRegisterSuccess"],stateMutations:{updatingNotification:!0,updateNotificationError:null,newNotification:function(t){return t.newNotification},onUpdateNotificationRegisterSuccess:function(t){return t.onUpdateNotificationRegisterSuccess}}},{UPDATE_NOTIFICATION_REGISTER_SUCCESS:"tbd",attributes:[],stateMutations:{updatingNotification:!1,updateNotificationSuccess:!0,onUpdateNotificationRegisterSuccess:null}},{UPDATE_NOTIFICATION_REGISTER_ERROR:"tbd",attributes:["updateNotificationError"],stateMutations:{updatingNotification:!1,updateNotificationError:function(t){return t.updateNotificationError},onUpdateNotificationRegisterSuccess:null}}]};e.default=n,t.exports=e.default},"./app/containers/AdminNotificationEdit/index.js":function(t,e,i){"use strict";var n=i("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=n(i("./node_modules/@babel/runtime/helpers/defineProperty.js")),a=n(i("./app/containers/App/selectors.js")),s=i("./helpers/redux/index.js"),r=n(i("./app/containers/AdminNotificationEdit/actionMeta.js")),c=i("./app/containers/AdminNotificationEdit/redux-definitions.js"),u=n(i("./app/containers/AdminNotificationEdit/saga.js")),d=n(i("./app/containers/AdminNotificationEdit/Container.js"));function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){(0,o.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}t.exports=(0,s.composeContainer)(d.default,r.default.key,f({},c.selectors,{},a.default),f({},c.actions),c.reducer,u.default)},"./app/containers/AdminNotificationEdit/redux-definitions.js":function(t,e,i){"use strict";var n=i("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=n(i("./app/containers/AdminNotificationEdit/actionMeta.js")),a=n(i("./helpers/redux/index.js"));t.exports=(0,a.default)(o.default)},"./app/containers/AdminNotificationEdit/saga.js":function(t,e,i){"use strict";var n=i("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(e,"__esModule",{value:!0}),e.doLoadNotification=S,e.doUpdateNotification=R,e.default=I;var o=n(i("./node_modules/@babel/runtime/regenerator/index.js")),a=i("./app/containers/AdminNotificationEdit/redux-definitions.js"),s=i("./node_modules/redux-saga/dist/redux-saga-effects-npm-proxy.cjs.js"),r=i("./app/containers/RequestStatusWrapper/actions.js"),c=i("./helpers/constants.js"),u=n(i("./app/utils/request.js")),d=o.default.mark(S),l=o.default.mark(R),f=o.default.mark(I),p=a.constants.LOAD_NOTIFICATION,N=a.constants.UPDATE_NOTIFICATION,m=a.actions.loadNotificationRegisterSuccess,b=a.actions.loadNotificationRegisterError,g=a.actions.updateNotificationRegisterError,j=a.actions.updateNotificationRegisterSuccess,h=(a.actions.createNotificationRegisterSuccess,a.actions.createNotificationRegisterError,a.selectors.makeSelectNotificationId),x=a.selectors.makeSelectNewNotification,E=a.selectors.makeSelectOnUpdateNotificationRegisterSuccess,_={type:"success",message:"Notification loaded!"},O={type:"success",message:"Notification updated!"};function S(){var t,e,i;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,s.select)(h());case 2:return t=n.sent,e="".concat(c.API_ENDPOINT,"/notifications/loadSingle?id=").concat(t),n.prev=4,n.next=7,(0,s.call)(u.default,e,{method:"GET"});case 7:if(!(i=n.sent).error){n.next=15;break}return n.next=11,(0,s.put)(b(i));case 11:return n.next=13,(0,s.put)((0,r.pushMessage)({type:error,message:i.errorMessage}));case 13:n.next=19;break;case 15:return n.next=17,(0,s.put)(m(i));case 17:return n.next=19,(0,s.put)((0,r.pushMessage)(_));case 19:n.next=27;break;case 21:return n.prev=21,n.t0=n.catch(4),n.next=25,(0,s.put)(b(n.t0));case 25:return n.next=27,(0,s.put)((0,r.pushMessage)(c.COMMUNICATION_ERROR_MESSAGE));case 27:case"end":return n.stop()}}),d,null,[[4,21]])}function R(){var t,e,i,n;return o.default.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,s.select)(x());case 2:return t=o.sent,o.next=5,(0,s.select)(E());case 5:return e=o.sent,i="".concat(c.API_ENDPOINT,"/notifications/update"),o.prev=7,o.next=10,(0,s.call)(u.default,i,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 10:if(!(n=o.sent).error){o.next=18;break}return o.next=14,(0,s.put)(g(n));case 14:return o.next=16,(0,s.put)((0,r.pushMessage)({type:error,message:n.errorMessage}));case 16:o.next=23;break;case 18:return o.next=20,(0,s.put)(j(n));case 20:return e&&e(),o.next=23,(0,s.put)((0,r.pushMessage)(O));case 23:o.next=31;break;case 25:return o.prev=25,o.t0=o.catch(7),o.next=29,(0,s.put)(g(o.t0));case 29:return o.next=31,(0,s.put)((0,r.pushMessage)(c.COMMUNICATION_ERROR_MESSAGE));case 31:case"end":return o.stop()}}),l,null,[[7,25]])}function I(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.takeLatest)(p,S);case 2:return t.next=4,(0,s.takeLatest)(N,R);case 4:case"end":return t.stop()}}),f)}}}]);